include ../mixins/flash-messages

doctype html
html

  //- HTML HEADER
  head
    meta(charset="utf-8")
    meta(name="viewport", content="width=device-width, initial-scale=1, shrink-to-fit=no")
    meta(http-equiv="X-UA-Compatible" content="IE=edge")
    meta(name="author" content=config.brand)
    meta(name="description" content=config.name)
      
    if config.allowRobots
      meta(name="robots" content="index,follow")
    else
      meta(name="robots" content="noindex,nofollow")
      
    title= title || 'Personal Site by Severin Fürbringer'
    link(rel="shortcut icon", href="/favicon.ico", type="image/x-icon")

    //- CSS
    link(href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.css", rel="stylesheet")
    link(href="/styles/site.min.css", rel="stylesheet")

    //- This file provides the default styling for the KeystoneJS Content Editor
    if user && user.canAccessKeystone
      link(href="/keystone/styles/content/editor.min.css", rel="stylesheet")
    
    link(rel="license" href=config.licenseLegal)
    
    //- Include template-specific stylesheets by extending the css block
    block css

    //- Add any other template-specific HEAD tags by extending the head block
    block head

  //- HTML BODY
  body

    //- HEADER
    header
      section.section
        div.container
          a(href='/').brand
            span= config.brand
          div
            ul
              each link in navLinks
                li(class=(section == link.key ? 'active' : null)): a(href=link.href)= link.label
            ul
              if user
                if user.canAccessKeystone
                  li: a(href='/keystone') Open Keystone
                li: a(href='/keystone/signout') Sign Out
              else
                li: a(href='/keystone/signin' rel='nofollow') λ

    //- BODY
    #body
      section.section
        div.container
          block intro
          +flash-messages(messages)
          block content

    //- FOOTER
    footer
      section.section
        div.container
          p By 
            a(href="/contact") Severin Fürbringer
          p
            a(rel="license" href=config.license target="_blank")
              img(alt="Creative Commons License" style="border-width:0" src=config.licenseImage)
            span  Licensed under 
              a(rel="license" href=config.licenseLegal target="_blank") CC-SA 4.0
          p.footer-right Code on Git{
            a(href="https://github.com/fuerbringer/fuerbringer.info" target="_blank") Hub
            | ,
            a(href="https://gitlab.com/fuerbringer/fuerbringer.info" target="_blank") Lab
            | }

    //- The KeystoneJS Content Editor provides support for ks-editable data attributes,
    //- which generate links to edit content for users who can access Keystone
    if user && user.canAccessKeystone
      script(src='/keystone/js/content/editor.js')
